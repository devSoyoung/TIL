# [TIL] 2020-04-12

## ğŸ’» ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œ í’€ì´
### ğŸ“ ì‚¼ì„± ì½”ë”©í…ŒìŠ¤íŠ¸: êµ¬ìŠ¬íƒˆì¶œ2
```java
package com.company;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.LinkedList;
import java.util.Queue;
import java.util.StringTokenizer;

import static java.lang.Math.abs;

public class Main {
    private static char[][] map;
    private static boolean[][][][] visited;

    private static int[] dirX = new int[] { 0, 0, -1, 1 };  // ìƒ, í•˜, ì¢Œ
    private static int[] dirY = new int[] { -1, 1, 0, 0 };

    public static void main(String[] args) throws Exception {
        // ì…ë ¥ ë°›ê¸°
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringTokenizer st = new StringTokenizer(br.readLine());

        int n = Integer.parseInt(st.nextToken());
        int m = Integer.parseInt(st.nextToken());
        map = new char [n][m];
        visited = new boolean[10][10][10][10];

        Info info = new Info();
        for (int i = 0; i < n; i++) {
            String str = br.readLine();
            for (int j = 0; j < m; j++) {
                map[i][j] = str.charAt(j);
                // í˜„ì¬ ê°’ì´ ê³µì— ëŒ€í•œ ì •ë³´ì¼ ê²½ìš°
                if (map[i][j] == 'R') {
                    info.rX = j;
                    info.rY = i;
                } else if (map[i][j] == 'B') {
                    info.bX = j;
                    info.bY = i;
                }
            }
        }

        int result = bfs(info);
        System.out.println(result);
    }

    private static int bfs(Info info) {
        Queue<Info> q = new LinkedList<Info>();
        q.offer(info);      // QUEUE: ë„£ì„ ë•Œ offer(), ëº„ ë•Œ poll()

        int result = -1;
        while(!q.isEmpty()) {
            Info current = q.poll();
            // ë°©ë¬¸ ì—¬ë¶€ ì²´í¬í•˜ê¸°
            visited[current.rX][current.rY][current.bX][current.bY] = true;

            if (current.count > 10) break;
            // ë¹¨ê°„ìƒ‰ ê³µë§Œ êµ¬ë©ì¼ ê²½ìš°
            if (map[current.rY][current.rX] == 'O' && map[current.bY][current.bX] != 'O') {
                result = current.count;
                break;
            }

            // ìƒí•˜ì¢Œìš° ì´ë™í•˜ê¸°
            for (int dir = 0; dir < 4; dir++) {
                int next_rX = current.rX;
                int next_rY = current.rY;
                int next_bX = current.bX;
                int next_bY = current.bY;

                // ë¹¨ê°„ ê³µ ì›€ì§ì´ê¸°
                while(true) {
                    // ë²½ê³¼ êµ¬ë©ì´ ì•„ë‹ˆë©´ ì›€ì§ì´ê¸°
                    if (map[next_rY][next_rX] != '#' && map[next_rY][next_rX] != 'O') {
                        next_rX += dirX[dir];
                        next_rY += dirY[dir];
                    } else {
                        if (map[next_rY][next_rX] == '#') {
                            next_rX -= dirX[dir];
                            next_rY -= dirY[dir];
                        }
                        break;
                    }
                }

                // íŒŒë€ ê³µ ì›€ì§ì´ê¸°
                while(true) {
                    // ë²½ê³¼ êµ¬ë©ì´ ì•„ë‹ˆë©´ ì›€ì§ì´ê¸°
                    if (map[next_bY][next_bX] != '#' && map[next_bY][next_bX] != 'O') {
                        next_bX += dirX[dir];
                        next_bY += dirY[dir];
                    } else {
                        if (map[next_bY][next_bX] == '#') {
                            next_bX -= dirX[dir];
                            next_bY -= dirY[dir];
                        }
                        break;
                    }
                }

                // ë‘ ê³µì´ ê°™ì€ ìœ„ì¹˜ì— ìˆëŠ” ê²½ìš°
                if (next_rX == next_bX && next_rY == next_bY) {
                    if (map[next_rY][next_rX] != 'O') {
                        int r_dist = abs(next_rY - current.rY) + abs(next_rX - current.rX);
                        int b_dist = abs(next_bY - current.bY) + abs(next_bX - current.bX);

                        // ë¹¨ê°„ ê³µì„ í•œ ì¹¸ ë” ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ: í•œ ì¹¸ ì•ì— ìœ„ì¹˜ì‹œí‚¤ë ¤ê³ 
                        if (r_dist > b_dist) {
                            next_rX -= dirX[dir];
                            next_rY -= dirY[dir];
                        } else {
                            next_bX -= dirX[dir];
                            next_bY -= dirY[dir];
                        }
                    }
                }

                if (!visited[next_rY][next_rX][next_bY][next_bX]) {
                    visited[next_rY][next_rX][next_bY][next_bX] = true;
                    Info next = new Info(next_rX, next_rY, next_bX, next_bY, current.count + 1);
                    q.offer(next);
                }
            }
        }

        return result;
    }
}

class Info {
    int rX, rY, bX, bY, count = 0;

    public Info(int rX, int rY, int bX, int bY, int count) {
        this.rX = rX;
        this.rY = rY;
        this.bX = bX;
        this.bY = bY;
        this.count = count;
    }

    public Info() { }
}
```

ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ê³  ë°±ì¤€ì— ì œì¶œí–ˆë”ë‹ˆ ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë‚¬ë‹¤. ì™œ ë‚¬ì§€?

* [ë°±ì¤€ 13460ë²ˆ êµ¬ìŠ¬ íƒˆì¶œ2 :: ëŠ¦ê¹ì´ IT](https://ghkvud2.tistory.com/40)
* https://www.youtube.com/watch?v=SarTy3ZwmVo&t=889s

ìœ íŠœë¸Œ ì˜ìƒì„ ë“¤ìœ¼ë©´ì„œ í’€ì´ë¥¼ ë°°ì› ë‹¤. 4ë°©í–¥ ì´ë™ë²•ì„ ì•Œê²Œ ëœ ì¢‹ì€ ë¬¸ì œ
> ê·¼ë° ì´ëŸ° ë¬¸ì œ ì§ì ‘ í’€ìœ¼ë¼ê³  í•˜ë©´ ì ˆëŒ€ ëª» í’€ ê²ƒ ê°™ì•„ì„œ ê±±ì • ğŸ˜­  

## ğŸŒ HTTPS ì°¨ë‹¨ ì •ì±…
> **Ref** : [SNI ì°¨ë‹¨ë°©ì‹ì´ë€ ë¬´ì—‡ì¸ê°€? : ë„¤ì´ë²„ ë¸”ë¡œê·¸](https://m.blog.naver.com/amhoin/221465021173)  

### ë‹¤ì–‘í•œ ì‚¬ì´íŠ¸ ì°¨ë‹¨ ë°©ì‹
![image](https://mblogthumb-phinf.pstatic.net/MjAxOTAyMjNfMjE1/MDAxNTUwODc2NDk4OTIx.lVYofWAQI_k4hdQ3dGKnqz_xsZ4JwD21pGtGk9ijjVwg.99gDGomGk5hudoMXzd80HuS2piSEjg49b4Yjde_F9JAg.JPEG.amhoin/Donga_190223.jpg?type=w800)

* **IP ì°¨ë‹¨** : ë„ë©”ì¸ì˜ IP ì£¼ì†Œ ìì²´ë¥¼ ì ‘ê·¼ ì°¨ë‹¨í•˜ëŠ” ë°©ì‹
* **DNS ì°¨ë‹¨** : ì°¨ë‹¨í•  ì„œë²„ì˜ ê²½ìš° DNSì—ì„œ IP ì£¼ì†Œ ëŒ€ì‹  ì°¨ë‹¨ ì‚¬ì´íŠ¸ ì£¼ì†Œë¥¼ ë°˜í™˜í•¨
* **HTTP ì°¨ë‹¨** : HTTP ìš”ì²­ì—ì„œ í—¤ë”ì˜ Host ì •ë³´ë¥¼ ì´ìš©í•œ ì°¨ë‹¨ ë°©ë²•. HTTPSì—ì„œëŠ” Host ì •ë³´ë„ ì•”í˜¸í™” ë˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
* **HTTPS ì°¨ë‹¨** (SNI ì°¨ë‹¨) : TCP í•¸ë“œì…°ì´í‚¹ ê³¼ì •ì—ì„œ `<Extension: server_name í•„ë“œ>`ì— í‘œì‹œë˜ëŠ” í˜¸ìŠ¤íŠ¸ ì •ë³´ë¥¼ ì´ìš©í•´ì„œ ì°¨ë‹¨
	* ESNI(Encrypted SNI)ë¥¼ ì´ìš©í•˜ë©´ ì°¨ë‹¨ì„ ìš°íšŒí•  ìˆ˜ ìˆë‹¤.
* HTTPSëŠ” ì›¹ ì„œë²„ì™€ì˜ í†µì‹  ë¶€ë¶„ì´ HTTPì—ì„œ HTTPSë¡œ ë³€ê²½(ì•”í˜¸í™”)ë˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— DNSì™€ëŠ” ê´€ë ¨ì´ ì—†ë‹¤.
* HTTPS(SSL/TLS) í†µì‹ ì€ ê¸°ë³¸ì ìœ¼ë¡œ 1:1 Client-Server êµ¬ì¡°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì•”í˜¸í™” ê¸°ìˆ 
* DNS ì§ˆì˜ê¹Œì§€ ì•”í˜¸í™”í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ DNS-over-TLS ë˜ëŠ” DNS-over-HTTPSë¥¼ ì„¤ì¹˜
	* https://developers.google.com/speed/public-dns/docs/dns-over-https
* DNSë¥¼ ì•”í˜¸í™” í•˜ëŠ” ê²½ìš°ì—ë„ DNS ì„œë²„ë¥¼ ê´€ë¦¬í•˜ëŠ” ISP ì—…ì²´ì—ì„œëŠ” ì•”í˜¸í™”ê°€ í’€ë¦¬ê¸° ë•Œë¬¸ì— ì‚¬ì—…ìë“¤ì€ ì‚¬ìš©ìê°€ ì–´ëŠ ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ë ¤ê³  í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ
* HTTPSë¥¼ í•˜ê±´ ì•ˆí•˜ê±´ SNI í•„í„°ë§ì„ í•˜ê±´ ì•ˆí•˜ê±´ ê°„ì— ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ì(ISP)ê°€ ë³¼ ìˆ˜ ìˆëŠ” ì‚¬ìš©ì ì •ë³´ëŠ” ì´ë¯¸ ì¶©ë¶„íˆ ë§ë‹¤.
	* https://www.upturn.org/reports/2016/what-isps-can-see/
